"use strict";window.ng=window.angular;var _dependencies=["ngMaterial","ngRoute","angular-loading-bar"],app=ng.module("app",_dependencies);app.run(["$rootScope","$location",function(e){var t="Home";e.$on("$routeChangeSuccess",function(n,o){if(o.locals&&o.locals.hasOwnProperty("currentSection")&&o.locals.currentSection.hasOwnProperty("title"))return void(e.title=o.locals.currentSection.title||t);e.title=o.$$route.title||t})}]),app.controller("baseController",["$scope",function(e){console.log("baseController called")}]),ng.module("app").provider("api",[function(){this.$get=["$http","BASE_URL","currentUser",function(e,t,n){function o(e){return e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})}var r=function(r,i,a){a=ng.isObject(a)?a:{},angular.forEach(a,function(e,t){var n={};angular.forEach(e,function(e,t){this[o(t)]=e},n),a[t]=n});var l=i;return a.url="http://"+t+"/"+l,a.method=r,a.headers=a.headers||{},a.headers.hasOwnProperty("sessionId")||ng.extend(a.headers,{sessionId:n.getAuthToken()}),e(a).then(function(e){return e.data},function(e){return console.log("ERROR OCCURRED"),e.data})};return["GET","PUT","POST","DELETE"].forEach(function(e){r[e.toLowerCase()]=function(t,n){return r(e,t,n)}}),r}]}]),ng.module("app").provider("cache",[function(){this.$get=[function(){var e=function(t,n,o){return 1===arguments.length?e.get(t):2===arguments.length?e.set(t,n):3===arguments.length?e.set(t,n,o):void 0};return e._hash={},e.set=function(t,n,o){delete e._hash[t];var r={val:n,lifetime:ng.isNumber(o)?o:-1,timestamp:(new Date).getTime()};return localStorage.setItem(t,ng.toJson(r)),this},e.get=function(t){if(e._hash.hasOwnProperty(t))return ng.copy(e._hash[t]);var n=JSON.parse(localStorage.getItem(t));return n?-1!==n.lifetime&&(new Date).getTime()-n.timestamp>n.lifetime?(e.remove(t),null):(e._hash[t]=n.val,ng.copy(n.val)):null},e.lifetime=function(t){return function(t,n){return e(t,n)}},e.remove=function(t){return delete e._hash[t],localStorage.removeItem(t),this},e.flush=function(){e._hash={},localStorage.clear()},e}]}]),app.service("currentUser",["session","$rootScope",function(e,t){this.isLoggedIn=function(){return!!e.auth_token()},this.user=function(){return e.user()},this.setUser=function(t){e.setUser(t)},this.setToken=function(t){e.setToken(t)},this.getAuthToken=function(){return e.auth_token()}}]),ng.module("app").constant("BASE_URL","107.170.11.184"),ng.module("app").provider("session",[function(){this.$get=["cache",function(e){return{setObject:function(t,n){e(t,n)},getObject:function(t){return e(t)},setUser:function(t){e("auth.user",t)},setToken:function(t){e("auth.token",t)},user:function(){return e("auth.user")},auth_token:function(){return e("auth.token")},purgeList:function(t){angular.forEach(t,function(t){e.remove(t)})},clear:function(){var t=["auth.user","auth.token"];return angular.forEach(t,function(t){e.remove(t)}),this}}}]}]),angular.module("app").run(["$templateCache",function(e){e.put("/voiceBasket/base.html","<div id=loading-bar-spinner><div class=bar><div class=peg></div></div></div><div layout=column><ng-include src=\"'/voiceBasket/header/headerTemplate.html'\"></ng-include><ng-include src=currentTemplate></ng-include></div>"),e.put("/voiceBasket/dashboard/dashboardTemplate.html","<div>This is the dashboard</div>"),e.put("/voiceBasket/header/headerTemplate.html",'<div layout=row class=vb-header ng-controller=headerController><div flex=40 layout=column layout-align=center><p>VOICE BASKET</p></div><div flex layout=row><ul layout-padding flex layout=row layout-align=end layout-margin><li ng-repeat="option in menu"><a ng-href="{{ option.link }}">{{ option.name }}</a></li></ul></div></div>'),e.put("/voiceBasket/home/homeTemplate.html",'<div layout=column class=vb-home layout-align="end center"><h1>Welcome to Voice Basket</h1><md-button ng-click="goTo(\'/\')">Book An Artist</md-button></div>'),e.put("/voiceBasket/login/loginTemplate.html",'<div layout=column layout-align="center center" ng-controller=loginController class=vb-login><h2>Login</h2><form name=loginForm layout=column ng-submit=login()><md-input-container><label for=email>Email</label> <input type=email id=email ng-model=user.email></md-input-container><md-input-container><label for=password>Password</label> <input type=password id=password ng-model=user.password></md-input-container><md-input-container layout=row layout-align="center center"><md-button ng-click=login()>Login</md-button></md-input-container></form></div>'),e.put("/voiceBasket/signUp/signUpTemplate.html",'<div layout=column layout-align="center center" ng-controller=signUpController class=vb-signUp><h2>Sign Up</h2><form name=signUpForm layout=column ng-submit=signUp()><md-input-container><label for=name>Name</label> <input type=text id=name ng-model=user.name></md-input-container><md-input-container><label for=companyName>Company Name</label> <input type=text id=companyName ng-model=user.companyName></md-input-container><md-input-container><label for=mobile>Mobile</label> <input type=text id=mobile ng-model=user.mobile></md-input-container><md-input-container><label for=email>Email</label> <input type=email id=email ng-model=user.email></md-input-container><md-input-container><label for=password>Password</label> <input type=password id=password ng-model=user.password></md-input-container><md-input-container layout=row layout-align="center center"><md-button ng-click=signUp()>Sign Up</md-button></md-input-container></form></div>')}]),app.constant("endPoints",{user:"account/user"}),function(){function e(e,t){this.register=function(n){return e.post(t.user,{data:n})},this.login=function(n){return e.put(t.user,{data:n})}}app.service("accountService",["api","endPoints",e])}(),app.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{controller:"voiceBasketBaseController",templateUrl:"/voiceBasket/base.html",title:"Home",resolve:{currentSectionTemplate:function(){return"home/homeTemplate.html"}}}).when("/book",{controller:"voiceBasketBaseController",templateUrl:"/voiceBasket/base.html",title:"Book An Artist",resolve:{currentSectionTemplate:function(){return"book/bookTemplate.html"}}}).when("/login",{controller:"voiceBasketBaseController",templateUrl:"/voiceBasket/base.html",title:"Login",resolve:{currentSectionTemplate:function(){return"login/loginTemplate.html"}}}).when("/sign-up",{controller:"voiceBasketBaseController",templateUrl:"/voiceBasket/base.html",title:"Sign Up",resolve:{currentSectionTemplate:function(){return"signUp/signUpTemplate.html"}}}).when("/dashboard",{controller:"voiceBasketBaseController",templateUrl:"/voiceBasket/base.html",title:"Dashboard",resolve:{currentSectionTemplate:function(){return"dashboard/dashboardTemplate.html"}}}),t.html5Mode({enabled:!0})}]),app.controller("voiceBasketBaseController",["$scope","$mdToast","$mdDialog","currentSectionTemplate","$location",function(e,t,n,o,r){e.showToast=function(e,n,o){n=n||"center-large-content",o=o||3e3,t.show(t.simple().textContent(e).position(n).hideDelay(o))},e.showDialog=function(e,t){n.show(n.alert().clickOutsideToClose(!0).title(e).htmlContent(t).ariaLabel(e).ok("Okay"))},e.goTo=function(e){r.path(e)},e.currentTemplate="/voiceBasket/".concat(o)}]),app.filter("searchFor",function(){return function(e,t){if(!t)return e;var n=[];return t=t.toLowerCase(),angular.forEach(e,function(e){-1!==e.title.toLowerCase().indexOf(t)&&n.push(e)}),n}}),function(){function e(e){e.menu=[{name:"Home",link:"/"},{name:"Voices",link:"/"},{name:"Login",link:"/login"},{name:"Sign Up",link:"/sign-up"}]}app.controller("headerController",["$scope",e])}(),function(){function e(e,t,n,o){function r(){t.register(e.user).then(function(t){t.status?(e.showToast("Sign Up successful","top"),o.setUser(t.result),o.setToken(t.result.sessionId),n.path("/dashboard")):e.showToast(t.message,"top")},function(t){console.log(t),e.showToast("Please try again","top")})}e.user={},e.signUp=r}app.controller("signUpController",["$scope","accountService","$location","currentUser",e])}(),function(){function e(e,t,n,o){function r(){t.login(e.user).then(function(t){t.status?(e.showToast("Login Successful","top"),n.setUser(t.result),n.setToken(t.result.sessionId),o.path("/dashboard")):e.showToast(t.message,"top")},function(t){console.log(t),e.showToast("Please try again","top")})}e.user={},e.login=r}app.controller("loginController",["$scope","accountService","currentUser","$location",e])}();